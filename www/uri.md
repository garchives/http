# URI

## URI 格式

┌──────────────────────────────────────────┐
│ scheme │ :// | host:port | path | ?query |
└──────────────────────────────────────────┘

* `scheme`: 协议名；如：http、https、ftp、ldap、file；不会将其发送给服务器
* `://`: 用于分隔 scheme 和后面的内容
* `host:port`：被称之为 **authority** 的部分，标识资源所在的主机，即主机名和端口号。
  * 主机名：可以是 IP 地址或域名，必须存在
  * 端口：非必须；浏览器等客户端会根据 scheme 自动指定默认的端口号，如 http scheme 的默认端口号是 80，https scheme 的默认端口号是 443
* `path`: 标识资源所在的路径；以 `/` 开始
* `query`: 以 `?` 开始；用 `&` 连接的多个 `key=value`（值可以为空） 的字符串

### 完整格式

┌─────────────────────────────────────────────────────────────────────┐
│ scheme │ :// | user@passwd@ | host:port | path | ?query | #fragment |
└─────────────────────────────────────────────────────────────────────┘

* `user@passwd@`: 身份信息；不推荐，因为会以明文方式暴露敏感信息
* `#fragment`: 片段标识符；仅用于浏览器等客户端定位到资源内部的锚点（锚链接），不会将其发送给服务器，服务器也不会处理此片段。

## URI 编码

* URI 中可能包含英文以外的中日文，即 **非 ASCII 码字符**
* `path` 和 `query` 中可能存在 `@`、`?`、`&`、`/` 等起到界定符作用的 **特殊字符**

URI 编码机制：直接将 **非 ASCII 码字符** 和 **特殊字符** 转换成十六进制字节值，然后在前面加一个 `%`。中文和日文通常使用 UTF-8 编码后再进行转义。
